udptun
======

This repository is an OpenWRT feed.

## Content

* `openspot-kmod-udptun` the udptun kernel module
* `udptun-go` userspace tool to set up a tunnel, also includes `authorized_keys` for SSH
* `diffconfig` the minimal OpenWRT configuration generated by `scripts/diffconfig` from OpenWRT


## Feeds

Add a `feeds.conf` to your OpenWRT folder with the content below:

```
src-git packages https://git.openwrt.org/feed/packages.git;openwrt-19.07
src-link udptun /home/dev/udptun
```

Then run:

```
cd $openwrt
scripts/feeds update -a
scripts/feeds install udptun-go
```

## Building

```
cd $openwrt
make -j8
scp bin/targets/ramips/mt7621/openwrt-ramips-mt7621-ubnt-erx-squashfs-sysupgrade.bin root@erx.dev.digineo.de:/tmp/
```

## Flashing

```
picocom -b 57600 /dev/ttyUSB0
sysupgrade /tmp/*-sysupgrade.bin
```
